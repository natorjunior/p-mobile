<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aula 10 - Storage e SQLite</title>

  <!-- Reveal.js -->
  <link rel="stylesheet" href="./dist/reveal.css">
  <link rel="stylesheet" href="./dist/theme/white.css" id="theme">

  <!-- Tema para c√≥digo -->
  <link rel="stylesheet" href="./plugin/highlight/atom-one-dark.css">
  <link rel="stylesheet" href="aula05-materials/style.css">

  <!-- Menu plugin -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.css" rel="stylesheet">
  <link rel="stylesheet" href="aula04-materials/style.css">
  <link rel="stylesheet" href="css/workshop.css">

  <style>
    .reveal h1,
    .reveal h2 {
      color: #0056b3;
      transition: color 0.3s ease;
    }

    .reveal pre code {
      font-size: 0.95em;
      background: #222;
      border-radius: 8px;
      padding: 15px;
      transition: all 0.3s ease;
    }

    .reveal pre code:hover {
      transform: scale(1.01);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .reveal p {
      font-size: 1.1em;
      line-height: 1.6;
    }

    .step-box {
      background: rgba(0, 123, 255, 0.08);
      padding: 15px 20px;
      border-radius: 8px;
      margin: 10px;
      border-left: 4px solid #0056b3;
      transition: all 0.3s ease;
    }

    .step-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .concept-box {
      background: rgba(40, 167, 69, 0.08);
      padding: 15px 20px;
      border-radius: 8px;
      margin: 10px;
      border-left: 4px solid #28a745;
      transition: all 0.3s ease;
    }

    .concept-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .fragment.visible {
      transition: all 0.5s ease;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <!-- Slide 1: T√≠tulo -->
      <section data-background-gradient="radial-gradient(#283b95, #17b2c3)">
        <br><br><br><br>
        <h4 style="color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.4);">
          Programa√ß√£o para Dispositivos M√≥veis
        </h4>
        <p style="color: white; font-size: .5em; font-weight: 300; margin-top: 10px;">
          Prof. Msc. Nator Junior Carvalho da Costa
        </p>
        <h6 style="color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.4);">
          Aula 10 - Storage e SQLite em React Native
        </h6>
        <h1>üì±</h1>
      </section>

      <!-- Slide 2: Objetivos -->
      <section data-background-gradient="radial-gradient(#1e3c72, #2a5298)">
        <div style="text-align: center;">
          <div style="background: rgba(255, 255, 255, 0.1); padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.1); margin: 20px;">
            <h1 style="color: white; font-size: 2.5em; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Objetivos üéØ</h1>

            <ul style="list-style: none; padding: 0; text-align: left; color: white; font-size: 1.2em;">
              <li class="fragment fade-up" style="margin: 15px 0;"><span>üíæ</span> AsyncStorage - Dados simples</li>
              <li class="fragment fade-up" style="margin: 15px 0;"><span>üîí</span> Secure Store - Dados sens√≠veis</li>
              <li class="fragment fade-up" style="margin: 15px 0;"><span>üóÑÔ∏è</span> SQLite - Banco de dados completo</li>
              <li class="fragment fade-up" style="margin: 15px 0;"><span>üîÑ</span> CRUD operacional</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Se√ß√£o AsyncStorage -->
      <section data-autoanimate>
        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="title" style="color: white;">AsyncStorage üíæ</h2>
          <div class="concept-box" data-autoanimate-id="content">
            <h3 style="color: white; margin-top: 0;">O que √©?</h3>
            <ul style="color: white; font-size: 1em;">
              <li class="fragment fade-up">Armazenamento ass√≠ncrono, n√£o criptografado</li>
              <li class="fragment fade-up">Funciona como localStorage do navegador</li>
              <li class="fragment fade-up">Pares chave-valor no dispositivo</li>
            </ul>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="title" style="color: white;">Setup</h2>
          <div data-autoanimate-id="content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-bash">npm install @react-native-async-storage/async-storage

import AsyncStorage from '@react-native-async-storage/async-storage';</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="title" style="color: white;">Salvar ‚Ä¢ Recuperar ‚Ä¢ Remover</h2>
          <div data-autoanimate-id="content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">// Salvar
await AsyncStorage.setItem('nome', JSON.stringify(valor));

// Recuperar
const valor = await AsyncStorage.getItem('nome');
const obj = valor ? JSON.parse(valor) : null;

// Remover
await AsyncStorage.removeItem('nome');
await AsyncStorage.clear(); // Remove tudo</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="title" style="color: white;">Padr√£o Recomendado</h2>
          <div data-autoanimate-id="content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">export const userStore = {
  async save(user) {
    await AsyncStorage.setItem('user', JSON.stringify(user));
  },
  async get() {
    const data = await AsyncStorage.getItem('user');
    return data ? JSON.parse(data) : null;
  },
  async clear() {
    await AsyncStorage.removeItem('user');
  }
};

// Uso
await userStore.save({ name: 'Jo√£o', age: 25 });
const user = await userStore.get();</code></pre>
            </div>
          </div>
        </section>
      </section>

      <!-- Se√ß√£o Secure Store -->
      <section data-autoanimate>
        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="secure-title" style="color: white;">Secure Store üîí</h2>
          <div class="concept-box" data-autoanimate-id="secure-content">
            <h3 style="color: white; margin-top: 0;">Para dados sens√≠veis</h3>
            <ul style="color: white; font-size: 1em;">
              <li class="fragment fade-up">Criptografia nativa do dispositivo</li>
              <li class="fragment fade-up">Tokens, senhas, dados privados</li>
              <li class="fragment fade-up">Limite: 2KB por item</li>
            </ul>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="secure-title" style="color: white;">Setup</h2>
          <div data-autoanimate-id="secure-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-bash">expo install expo-secure-store

import * as SecureStore from 'expo-secure-store';</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="secure-title" style="color: white;">Salvar ‚Ä¢ Recuperar ‚Ä¢ Remover</h2>
          <div data-autoanimate-id="secure-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">// Salvar (criptografado)
await SecureStore.setItemAsync('token', 'abc123...');

// Recuperar (descriptografa)
const token = await SecureStore.getItemAsync('token');

// Remover
await SecureStore.deleteItemAsync('token');

// Logout
await SecureStore.deleteItemAsync('token');
await SecureStore.deleteItemAsync('userId');</code></pre>
            </div>
          </div>
        </section>
      </section>

      <!-- Se√ß√£o SQLite -->
      <section data-autoanimate>
        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">SQLite üóÑÔ∏è</h2>
          <div class="concept-box" data-autoanimate-id="sqlite-content">
            <h3 style="color: white; margin-top: 0;">Banco de dados completo</h3>
            <ul style="color: white; font-size: 1em;">
              <li class="fragment fade-up">Banco relacional com SQL</li>
              <li class="fragment fade-up">Dados estruturados e complexos</li>
              <li class="fragment fade-up">Consultas avan√ßadas</li>
            </ul>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">Setup</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-bash">expo install expo-sqlite

import { openDatabaseAsync } from 'expo-sqlite';

let db;
db = await openDatabaseAsync('app.db');</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">Criar Tabela</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">export const initDB = async () => {
  await db.execAsync(`
    CREATE TABLE IF NOT EXISTS users (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      email TEXT UNIQUE,
      age INTEGER
    );
  `);
};

await initDB();</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">INSERT ‚Ä¢ Adicionar</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">export const insertUser = async (name, email, age) => {
  const result = await db.runAsync(
    'INSERT INTO users (name, email, age) VALUES (?, ?, ?);',
    [name, email, age]
  );
  return result.lastInsertRowid;
};

// Uso
const id = await insertUser('Jo√£o', 'joao@email.com', 28);</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">SELECT ‚Ä¢ Buscar</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">// Buscar todos
export const getAll = async () => {
  return await db.getAllAsync('SELECT * FROM users;');
};

// Buscar por ID
export const getById = async (id) => {
  return await db.getFirstAsync(
    'SELECT * FROM users WHERE id = ?;',
    [id]
  );
};

// Uso
const users = await getAll();
const user = await getById(1);</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">UPDATE ‚Ä¢ Atualizar</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">export const updateUser = async (id, name, email, age) => {
  const result = await db.runAsync(
    'UPDATE users SET name = ?, email = ?, age = ? WHERE id = ?;',
    [name, email, age, id]
  );
  return result.changes > 0;
};

// Uso
await updateUser(1, 'Jo√£o Silva', 'joao@novo.com', 29);</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">DELETE ‚Ä¢ Remover</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box">
              <pre><code class="language-javascript">export const deleteUser = async (id) => {
  const result = await db.runAsync(
    'DELETE FROM users WHERE id = ?;',
    [id]
  );
  return result.changes > 0;
};

// Uso
const deletado = await deleteUser(1);</code></pre>
            </div>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="sqlite-title" style="color: white;">Consultas √öteis</h2>
          <div data-autoanimate-id="sqlite-content" style="margin: 20px;">
            <div class="step-box" style="font-size: 0.9em;">
              <pre><code class="language-javascript">// Filtro
await db.getAllAsync(
  'SELECT * FROM users WHERE age > ?;', [18]
);

// Contar
const { total } = await db.getFirstAsync(
  'SELECT COUNT(*) as total FROM users;'
);

// Ordena√ß√£o e limite
await db.getAllAsync(
  'SELECT * FROM users ORDER BY name LIMIT 10;'
);</code></pre>
            </div>
          </div>
        </section>
      </section>

      <!-- Se√ß√£o Atividades -->
      <section data-autoanimate>
        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="atividade-title" style="color: white;">Atividade 1 üíª</h2>
          <div class="concept-box" data-autoanimate-id="atividade-content">
            <h3 style="color: white; margin-top: 0;">AsyncStorage</h3>
            <ul style="color: white;">
              <li class="fragment fade-up">Input para digitar nome</li>
              <li class="fragment fade-up">Bot√£o para salvar (AsyncStorage)</li>
              <li class="fragment fade-up">Bot√£o para carregar</li>
              <li class="fragment fade-up">Exibir nome recuperado</li>
            </ul>
          </div>
        </section>

        <section data-autoanimate data-background-gradient="radial-gradient(#283b95, #17b2c3)">
          <h2 data-autoanimate-id="atividade-title" style="color: white;">Atividade 2 üíª</h2>
          <div class="concept-box" data-autoanimate-id="atividade-content">
            <h3 style="color: white; margin-top: 0;">SQLite CRUD</h3>
            <ul style="color: white;">
              <li class="fragment fade-up">Tabela 'notas' com: id, titulo, conteudo</li>
              <li class="fragment fade-up">Adicionar nova nota</li>
              <li class="fragment fade-up">Listar todas as notas</li>
              <li class="fragment fade-up">Editar e deletar notas</li>
            </ul>
          </div>
        </section>
      </section>

    </div>
  </div>

  <!-- Scripts Reveal.js -->
  <script src="dist/reveal.js"></script>
  <script src="plugin/markdown/markdown.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script src="./aula04-materials/script.js"></script>

  <script>
    Reveal.initialize({
      center: false,
      controls: true,
      progress: true,
      slideNumber: true,
      history: true,
      transition: 'convex',
      transitionSpeed: 'default',
      autoAnimate: true,
      autoAnimateEasing: 'ease-in-out',
      autoAnimateDuration: 0.8,
      plugins: [RevealMarkdown, RevealHighlight, RevealMenu],
      markdown: { smartypants: true },
      width: 1200,
      height: 800,
      hash: true,
      respondToHashChanges: true,
      menu: {
        side: 'left',
        width: 300,
        numbers: true,
        titleSelector: 'h1, h2, h3, h4, h5, h6'
      }
    });
  </script>
</body>

</html>
